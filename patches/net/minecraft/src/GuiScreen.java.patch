--- a/net/minecraft/src/GuiScreen.java
+++ b/net/minecraft/src/GuiScreen.java
@@ -26,7 +26,9 @@
     public int height;
 
     /** A list of all the controls added to this container. */
-    protected List controlList = new ArrayList();
+
+	protected ArrayList<GuiButton> buttonList = new ArrayList<GuiButton>();
+	protected List controlList = buttonList;
     public boolean allowUserInput = false;
 
     /** The FontRenderer used by GuiScreen */
@@ -39,6 +41,10 @@
     private long field_85043_c = 0L;
     private int field_92018_d = 0;
 
+	private int eventButton;
+	public int mouseOffsetX = 0;
+	public int mouseOffsetY = 0;
+
     /**
      * Draws the screen and all the components in it.
      */
@@ -177,14 +183,40 @@
             this.handleKeyboardInput();
         }
     }
+    
+    public void mouseDown( int rawX, int rawY, int button )
+    {
+        int var1 = rawX * this.width / this.mc.displayFBWidth;
+        int var2 = this.height - rawY * this.height / this.mc.displayFBHeight - 1;
+        this.eventButton = button;
+        this.field_85043_c = Minecraft.getSystemTime();
+        mouseClicked(var1, var2, button);
+    }
+    
+    public void mouseUp( int rawX, int rawY, int button )
+    {
+        int var1 = rawX * this.width / this.mc.displayFBWidth;
+        int var2 = this.height - rawY * this.height / this.mc.displayFBHeight - 1;
+        mouseMovedOrUp(var1, var2, button);
+    }
+    
+    public void mouseDrag( int rawX, int rawY )
+    {
+        int var1 = rawX * this.width / this.mc.displayFBWidth;
+        int var2 = this.height - rawY * this.height / this.mc.displayFBHeight - 1;
+        long var3 = Minecraft.getSystemTime() - this.field_85043_c;
+        this.func_85041_a(var1, var2, this.eventButton, var3);
+    }
 
     /**
      * Handles mouse input.
      */
     public void handleMouseInput()
     {
-        int var1 = Mouse.getEventX() * this.width / this.mc.displayWidth;
-        int var2 = this.height - Mouse.getEventY() * this.height / this.mc.displayHeight - 1;
+        int var1 = ( Mouse.getEventX() + mouseOffsetX ) * this.width  / this.mc.displayFBWidth;
+        int var2 = this.height - ( Mouse.getEventY()  + mouseOffsetY) * this.height/ this.mc.displayFBHeight - 1;
+        mouseOffsetX = 0;
+        mouseOffsetY = 0;
 
         if (Mouse.getEventButtonState())
         {
@@ -261,7 +293,7 @@
     {
         if (this.mc.theWorld != null)
         {
-            this.drawGradientRect(0, 0, this.width, this.height, -1072689136, -804253680);
+            this.drawGradientRect(0, 0, this.width, this.height, 0, 0);
         }
         else
         {
